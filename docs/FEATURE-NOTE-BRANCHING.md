# ç¬”è®°åˆ†æ”¯ç®¡ç†ç³»ç»Ÿ - åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°
å®ç°ç±»ä¼¼ Git çš„ç¬”è®°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ”¯æŒæŒ‰æ®µè½åˆ†å‰²ã€åˆ†æ”¯ç®¡ç†ã€åˆå¹¶ç­‰åŠŸèƒ½ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. æ®µè½çº§ç‰ˆæœ¬æ§åˆ¶
- å°†ç¬”è®°æŒ‰æ®µè½/ç« èŠ‚åˆ†å‰²æˆç‹¬ç«‹å•å…ƒ
- æ¯ä¸ªæ®µè½éƒ½æœ‰ç‹¬ç«‹çš„ç‰ˆæœ¬å†å²
- æ”¯æŒæ®µè½çº§çš„å·®å¼‚æ¯”è¾ƒ

### 2. æ ‘çŠ¶åˆ†æ”¯ç»“æ„
- åˆ†æ”¯ä»¥æ ‘çŠ¶ç»“æ„å±•ç¤ºï¼Œç›´è§‚æ˜¾ç¤ºçˆ¶å­å…³ç³»
- æ”¯æŒæ‹–æ”¾æ“ä½œç§»åŠ¨åˆ†æ”¯
- æ™ºèƒ½é‡åŸºï¼ˆrebaseï¼‰æœºåˆ¶

### 3. åˆ†æ”¯æ“ä½œ
- åˆ›å»ºåˆ†æ”¯ï¼šä»ä»»æ„æ®µè½æˆ–ç‰ˆæœ¬åˆ›å»ºæ–°åˆ†æ”¯
- åˆ‡æ¢åˆ†æ”¯ï¼šå¿«é€Ÿåˆ‡æ¢ä¸åŒç‰ˆæœ¬
- åˆå¹¶åˆ†æ”¯ï¼šæ”¯æŒå¤šç§åˆå¹¶ç­–ç•¥
- åˆ é™¤/å½’æ¡£åˆ†æ”¯

### 4. åä½œåŠŸèƒ½
- åˆ†æ”¯æƒé™ç®¡ç†ï¼ˆç§æœ‰/å…±äº«/åªè¯»/åä½œ/å…¬å¼€ï¼‰
- åˆ†æ”¯è¯„è®ºç³»ç»Ÿ
- å˜æ›´è¿½è¸ªå’Œå½’å±

## æ•°æ®ç»“æ„è®¾è®¡

```typescript
interface NoteVersion {
  id: string;
  noteId: number;
  branchName: string;
  parentVersionId?: string;
  blocks: NoteBlock[];
  timestamp: Date;
  author: string;
}

interface NoteBlock {
  id: string;
  content: string;
  type: 'paragraph' | 'heading' | 'list' | 'quote' | 'code';
  metadata: {
    position: number;
    hash: string;
  };
}

interface BranchNode {
  id: string;
  name: string;
  parentBranchId: string | null;
  children: BranchNode[];
  metadata: {
    createdAt: Date;
    lastModified: Date;
    author: string;
    tags: string[];
    color: string;
    icon: string;
  };
  stats: {
    blocksAdded: number;
    blocksModified: number;
    blocksDeleted: number;
  };
}
```

## UI è®¾è®¡

### åˆ†æ”¯æ ‘è§†å›¾
```
ğŸ“ Research Paper Draft
â”œâ”€ ğŸŒ¿ main
â”‚  â”œâ”€ ğŸ”€ experiment-1
â”‚  â”‚  â”œâ”€ ğŸ”€ experiment-1-results
â”‚  â”‚  â””â”€ ğŸ”€ experiment-1-discussion
â”‚  â”œâ”€ ğŸ”€ literature-review
â”‚  â””â”€ ğŸ”€ reviewer-feedback
â””â”€ ğŸ—‘ï¸ Archived branches
```

### æ®µè½æ“ä½œèœå•
- Create branch from here
- View history
- Compare with other branch
- Merge changes

## é«˜çº§åŠŸèƒ½

### 1. æ™ºèƒ½åŠŸèƒ½
- AI è¾…åŠ©åˆå¹¶å»ºè®®
- å†…å®¹ç›¸ä¼¼åº¦æ£€æµ‹
- è‡ªåŠ¨å†²çªé¢„æµ‹
- å†™ä½œæ”¹è¿›å»ºè®®

### 2. åˆ†æ”¯æ¨¡æ¿
- å­¦æœ¯è®ºæ–‡æ¨¡æ¿
- å®éªŒæŠ¥å‘Šæ¨¡æ¿
- åˆ›æ„å†™ä½œæ¨¡æ¿

### 3. å¯¼å‡ºé€‰é¡¹
- å¯¼å‡ºç‰¹å®šåˆ†æ”¯
- ç”Ÿæˆç‰ˆæœ¬å†å²æ–‡æ¡£
- åˆ›å»ºåä½œåŒ…

## æŠ€æœ¯å®ç°

### å­˜å‚¨æ–¹æ¡ˆ
- ä½¿ç”¨ SQLite å­˜å‚¨ç‰ˆæœ¬æ•°æ®
- å¢é‡å­˜å‚¨ä¼˜åŒ–ç©ºé—´
- ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½

### åˆå¹¶ç®—æ³•
- åŸºäºä¸‰æ–¹åˆå¹¶ï¼ˆ3-way mergeï¼‰
- æ”¯æŒè‡ªåŠ¨å’Œæ‰‹åŠ¨å†²çªè§£å†³
- ä¿ç•™å®Œæ•´çš„åˆå¹¶å†å²

## ä½¿ç”¨åœºæ™¯

1. **å­¦æœ¯å†™ä½œ**
   - ä¸åŒç‰ˆæœ¬çš„è®ºæ–‡è‰ç¨¿
   - é’ˆå¯¹ä¸åŒæœŸåˆŠçš„ä¿®æ”¹ç‰ˆæœ¬
   - å®¡ç¨¿æ„è§çš„å“åº”ç‰ˆæœ¬

2. **åˆ›æ„å†™ä½œ**
   - æ¢ç´¢ä¸åŒçš„æ•…äº‹èµ°å‘
   - ç®¡ç†è§’è‰²å‘å±•çš„å¤šç§å¯èƒ½
   - å®éªŒä¸åŒçš„å†™ä½œé£æ ¼

3. **çŸ¥è¯†ç®¡ç†**
   - ç¬”è®°çš„é€æ­¥å®Œå–„è¿‡ç¨‹
   - ä¸åŒè§†è§’çš„æ•´ç†ç‰ˆæœ¬
   - æ•™å­¦/ç ”ç©¶/åˆ†äº«ç­‰ä¸åŒç”¨é€”ç‰ˆæœ¬

## å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€ç‰ˆæœ¬æ§åˆ¶
- [ ] å®ç°ç¬”è®°å¿«ç…§åŠŸèƒ½
- [ ] ç‰ˆæœ¬å†å²æŸ¥çœ‹
- [ ] ç®€å•çš„å·®å¼‚æ¯”è¾ƒ

### Phase 2: åˆ†æ”¯ç®¡ç†
- [ ] åˆ›å»ºå’Œåˆ‡æ¢åˆ†æ”¯
- [ ] æ ‘çŠ¶åˆ†æ”¯è§†å›¾
- [ ] åˆ†æ”¯ç§»åŠ¨å’Œé‡ç»„ç»‡

### Phase 3: é«˜çº§åŠŸèƒ½
- [ ] ä¸‰æ–¹åˆå¹¶ç®—æ³•
- [ ] å†²çªè§£å†³ç•Œé¢
- [ ] åä½œåŠŸèƒ½
- [ ] AI è¾…åŠ©åŠŸèƒ½

## ç›¸å…³æŠ€æœ¯
- ProseMirror - ç”¨äºå¯Œæ–‡æœ¬ç¼–è¾‘å’Œåä½œ
- Diff algorithms - æ–‡æœ¬å·®å¼‚ç®—æ³•
- Operational Transformation - åä½œç¼–è¾‘ç®—æ³•