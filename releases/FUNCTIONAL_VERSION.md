# 功能性版本 - v2.0.3-functional

## 新增功能

基于之前成功显示UI的版本，现在添加了实际的插件功能。

## 主要功能

### 1. 历史记录追踪
- 自动记录您查看的文献
- 保存最近100条历史记录
- 显示标题、作者、文献类型

### 2. 历史面板
- 右侧弹出式面板
- 可通过多种方式打开：
  - 右下角蓝色按钮（📚）
  - 工具菜单 → Research Navigator - History Panel
  - 工具栏按钮（如果成功添加）
- 双击历史项可直接打开文献
- 带关闭按钮（✕）

### 3. 右键菜单功能
- 选中文献右键 → "Add to Research History"
- 手动添加重要文献到历史
- 显示绿色通知提示

### 4. 工具栏按钮
- 尝试添加到 Zotero 工具栏
- 如果看不到，可能需要右键工具栏自定义

## 使用方法

1. **查看历史**
   - 点击右下角蓝色圆形按钮（📚）
   - 或使用工具菜单

2. **添加到历史**
   - 自动：选择任何文献即自动添加
   - 手动：右键文献 → "Add to Research History"

3. **打开历史文献**
   - 在历史面板中双击任何项目

4. **关闭面板**
   - 点击面板右上角的 ✕ 按钮
   - 或再次点击切换按钮

## 修复的问题

1. **弹窗无法关闭**
   - 不再使用 alert()
   - 使用可关闭的面板

2. **实际功能**
   - 添加了真正的历史追踪功能
   - 使用 Zotero.Notifier 监听选择事件

3. **更好的UI**
   - 浮动按钮使用图标而非文字
   - 添加悬停效果
   - 通知提示自动消失

## 技术细节

- 使用 Zotero.Notifier 监听项目选择
- 使用 Map 管理多窗口的面板
- 历史数据存储在内存中（重启后清空）
- 支持多窗口环境

## 下一步改进

如果需要更多功能：
1. 持久化历史记录到数据库
2. 添加搜索功能
3. 导出历史记录
4. 添加标签和笔记

---
版本：v2.0.3-functional
日期：2025-01-27