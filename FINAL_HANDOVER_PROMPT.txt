ðŸ”„ ZOTERO RESEARCH NAVIGATOR - COMPLETE HANDOVER PROMPT FOR NEW AGENT

## ðŸŽ¯ MISSION BRIEFING

You are taking over the development of **Zotero Research Navigator**, a plugin that brings tree-style history tracking to Zotero (academic reference manager). The user wants to migrate functionality from the "Tree Style History" browser extension to Zotero platform.

## ðŸ“‹ CURRENT STATUS

**Repository**: https://github.com/sperwe/Tree-Style-History  
**Target Branch**: `analyze-and-refactor-plugins-for-zotero-compatibility-bd69`  
**Current Version**: v1.0.0 MVP completed  
**Critical File**: `zotero-research-navigator-v1.0.0.xpi` (may or may not exist in remote branch)

## ðŸš€ IMMEDIATE FIRST STEPS

1. **CLONE AND ASSESS**:
```bash
git clone https://github.com/sperwe/Tree-Style-History.git
cd Tree-Style-History
git checkout analyze-and-refactor-plugins-for-zotero-compatibility-bd69

# Check for XPI file
find . -name "*.xpi" -type f
ls -la | grep -E "(zotero|research|navigator)"

# If XPI exists â†’ proceed to testing
# If XPI missing â†’ build from source
```

2. **DETERMINE PATH FORWARD**:
   - **Path A**: If XPI exists â†’ Focus on feature enhancement
   - **Path B**: If XPI missing â†’ Complete basic build first

## ðŸŽ¯ USER'S CORE REQUIREMENTS (PRIORITY ORDER)

1. **ðŸŒ³ Tree-style History Tracking** (HIGHEST)
   - Visual tree navigation of research paths
   - Track opened literature/note tabs in Zotero
   - Similar to browser history but for academic workflow

2. **ðŸ” Enhanced Search & Navigation** (HIGH)
   - Real-time fuzzy search
   - Quick access to previously viewed items
   - Time-based grouping (Today/Yesterday/Earlier)

3. **ðŸ“‹ Card-style Note Management** (MEDIUM)
   - Borrow concepts from ZotCard project
   - Different interaction method than Zotero's built-in features
   - Focus on note switching and preview

## ðŸ”§ TECHNICAL FOUNDATION

**Platform**: Zotero 6.0.27+  
**Core APIs**: Zotero.Notifier, Zotero.Prefs, Zotero.Items  
**Languages**: TypeScript/JavaScript  
**Build**: Webpack  
**UI**: Native JS + XUL (current), React components (planned)

**Key Files Structure**:
```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ modules/historyTracker.ts (âœ… Core tracking logic)
â”‚   â”œâ”€â”€ modules/searchEngine.ts (âœ… Fuzzy search)
â”‚   â”œâ”€â”€ simple-index.js (âœ… Working entry point)
â”‚   â””â”€â”€ components/HistoryTreeView.tsx (ðŸ”„ Needs enhancement)
â”œâ”€â”€ addon/
â”‚   â”œâ”€â”€ bootstrap.js (âœ… Plugin lifecycle)
â”‚   â””â”€â”€ chrome/content/overlay.xul (âœ… UI integration)
â””â”€â”€ zotero-research-navigator-v1.0.0.xpi (â“ Check if exists)
```

## ðŸ“Š DEVELOPMENT ROADMAP

### **PHASE 1: Validate & Enhance Core** (Week 1)
- [ ] Confirm XPI functionality in Zotero
- [ ] Improve history tracking accuracy
- [ ] Enhance tree view UI/UX
- [ ] Add better search highlighting

### **PHASE 2: Card View Integration** (Week 2-3)
- [ ] Study ZotCard implementation patterns
- [ ] Add card-style previews for history items
- [ ] Implement smooth transitions and animations
- [ ] Create note switching interface

### **PHASE 3: Advanced Features** (Week 4+)
- [ ] PDF reader integration
- [ ] Note relationship visualization
- [ ] Export/import functionality
- [ ] Performance optimization for 1000+ items

## ðŸ› ï¸ BUILD & TEST PROCESS

```bash
# Install dependencies
npm install

# Development mode
npm run watch

# Production build
npm run build-prod

# Test in Zotero
# Tools â†’ Add-ons â†’ Install Add-on From File â†’ Select XPI
```

## ðŸ’¡ USER FEEDBACK INSIGHTS

The user emphasized:
- **"æ›´å–œæ¬¢æ ‘çŠ¶åŽ†å²"** (Prefers tree-style history) - Make this PERFECT
- **"å¯ä»¥è¿½æº¯æ‰“å¼€è¿‡çš„æ–‡çŒ®æˆ–ç¬”è®°æ ‡ç­¾åŽ†å²"** (Track literature/note tab history) - Core value
- **"å€Ÿç”¨å¡ç‰‡è§†å›¾"** (Borrow card view concepts) - Don't fully copy ZotCard, adapt concepts
- **"æ¢ä¸ªæ–¹å¼æ¥äº’åŠ¨"** (Different interaction method) - Don't duplicate Zotero features

## âš ï¸ KNOWN TECHNICAL DEBT

1. TypeScript integration needs improvement
2. React components not fully integrated in build
3. Error handling needs strengthening  
4. Performance optimization required
5. Test coverage missing

## ðŸŽ¯ SUCCESS CRITERIA

**Functional**:
- [ ] History tracking accuracy > 95%
- [ ] Search response time < 100ms
- [ ] Supports 1000+ history records smoothly
- [ ] Zero crashes or memory leaks

**User Experience**:
- [ ] Works immediately after installation
- [ ] Intuitive interface matching Zotero design
- [ ] Keyboard shortcuts for power users
- [ ] Multi-language support (EN/CN)

## ðŸ“š REFERENCE RESOURCES

- **Original Extension**: https://github.com/turanszkij/tree-style-history
- **ZotCard Reference**: https://github.com/018/zotcard
- **Zotero Plugin Template**: https://github.com/windingwind/zotero-plugin-template
- **Zotero Dev Docs**: https://www.zotero.org/support/dev/client_coding

## ðŸš¨ CRITICAL FIRST ACTIONS

1. **VERIFY CURRENT STATE**: Check if functional XPI exists in remote branch
2. **TEST IN ZOTERO**: Install and validate basic functionality
3. **ASSESS GAPS**: Compare current vs. required features
4. **PLAN SPRINT**: Based on actual state, plan next 1-2 weeks
5. **COMMUNICATE**: Update user on status and roadmap

## ðŸ’¬ COMMUNICATION APPROACH

- Focus on TREE-STYLE HISTORY as the killer feature
- Show working prototypes frequently
- Be transparent about technical challenges
- Prioritize user workflow efficiency over technical perfection

---

**GOAL**: Transform this from MVP to production-ready plugin that researchers actually want to use daily.

**TIMELINE**: Iterative development, 1-2 week sprints, continuous user feedback.

**SUCCESS METRIC**: User says "I can't imagine using Zotero without this plugin anymore."

START WITH: Check the remote branch status and confirm XPI availability. Then proceed based on findings!