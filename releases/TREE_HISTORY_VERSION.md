# 树状历史版本 - v2.0.3-tree-history

## 新增功能：树状历史追踪

这个版本实现了基于 Tree-Style-History 概念的树状历史功能。

## 主要特性

### 1. 树状结构组织
- **自动构建父子关系**：5秒内的文献切换被认为是导航关系
- **会话管理**：30分钟无活动自动开始新会话
- **多根节点**：支持多个独立的研究路径

### 2. 可视化界面
- **绿色浮动按钮**（🌳）：右下角，点击打开树形面板
- **树形面板**：
  - 按会话分组显示
  - 展开/折叠节点
  - 当前节点高亮（蓝色背景）
  - 显示访问次数

### 3. 智能追踪
- **自动追踪**：选择文献时自动添加到树
- **访问计数**：重复访问同一文献会增加计数
- **时间关联**：基于时间判断父子关系

### 4. 交互功能
- **点击节点**：直接打开对应文献
- **右键菜单**："Start New Research Path Here" - 从选中文献开始新路径
- **会话控制**：
  - New Session：手动开始新会话
  - Clear All：清空所有历史

### 5. 节点信息
- **文献类型图标**：
  - 📰 期刊文章
  - 📚 书籍
  - 📋 会议论文
  - 🎓 学位论文
  - 📊 报告
  - 🌐 网页
  - 📄 其他
- **悬停提示**：显示完整标题、作者、年份

## 使用说明

1. **开始研究**
   - 正常浏览文献，系统自动构建树
   - 快速切换文献（5秒内）会形成父子关系

2. **查看历史树**
   - 点击右下角绿色按钮（🌳）
   - 或使用工具菜单 → Research Navigator - Tree History

3. **管理会话**
   - 超过30分钟无活动自动新会话
   - 点击 "New Session" 手动开始新会话

4. **导航**
   - 点击树中任意节点直接打开文献
   - 使用展开/折叠管理大型树

## 技术实现

- 使用类结构管理节点（TreeNode）
- Map 结构存储节点关系
- 基于时间的父子关系算法
- 纯内存存储（重启后清空）

## 下一步计划

1. 数据持久化到 Zotero 数据库
2. 添加搜索和过滤功能
3. 支持手动调整树结构
4. 导出研究路径
5. 添加引用关系检测

## 已知限制

- 数据存储在内存中，重启 Zotero 后会丢失
- 暂不支持跨会话的关系检测
- 面板宽度固定，可能需要调整

---
版本：v2.0.3-tree-history
日期：2025-01-27
基于：Tree-Style-History 概念